<!DOCTYPE HTML>
<%@page language="PL/SQL"%>
<%@plsql procedure="PAGE_REFERENCES_CURSOR"%>
<%@plsql parameter="RESUMATOR_ID_VAL" DEFAULT="NULL"%>

<%!CURSOR REF_CURSOR IS

SELECT REFERENCES.REFERENCE_ID, REFERENCES.F_NAME, REFERENCES.L_NAME, REFERENCES.PHONE_NUMBER, REFERENCES.ADDRESS, REFERENCES.EMAIL, REFERENCES.COMPANY, REFERENCES.TITLE, REFERENCES.DISPLAY_RANK
FROM REFERENCES
WHERE REFERENCES.RESUMATOR_ID = RESUMATOR_ID_VAL
ORDER BY DISPLAY_RANK;

SCRIPT_COUNTER INTEGER := 0;
REF_ROW REF_CURSOR%ROWTYPE;
%>
<script language="javascript" type="text/javascript">
var references_array = new Array();
</script>
<%OPEN REF_CURSOR;
LOOP
FETCH REF_CURSOR INTO REF_ROW;
EXIT WHEN REF_CURSOR%NOTFOUND;%>
              <!-- loop through all listed projects -->
<script>references_array[<%=SCRIPT_COUNTER%>] = [<%=REF_ROW.REFERENCE_ID%>, <%=REF_ROW.F_NAME%>,<%=REF_ROW.L_NAME%>, <%=REF_ROW.PHONE_NUMBER%>,<%=REF_ROW.ADDRESS%>,<%=REF_ROW.EMAIL%>,<%=REF_ROW.COMPANY%>,<%=REF_ROW.TITLE%>,<%=REF_ROW.DISPLAY_RANK%> ] </script>
              <p>
                 <%=REF_ROW.F_NAME%> <%=REF_ROW.L_NAME%><br/>
                 <%=REF_ROW.TITLE%><br/>
                 <%=REF_ROW.COMPANY%><br/>
                 <%=REF_ROW.ADDRESS%><br/>
                 <%=REF_ROW.EMAIL%><br/>
                 <%=REF_ROW.PHONE_NUMBER%><br/>
              </p>
<%
SCRIPT_COUNTER := SCRIPT_COUNTER + 1;
END LOOP;
CLOSE REF_CURSOR;%>

  <!-- ADD EDUCATION MODAL -->

  <div id="add-education-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
      <h3 id="myModalLabel">Add Education Information</h3>
    </div>
    <div class="modal-body">
      <form action="http://oracle.is.umbc.edu:8080/classpsp/IS420_TEAM_TRG.FORM_ADD_EDUCATION" method="get">
          
          <div class="form-inline margin-form-inline">
            <input class="span3" type="hidden" NAME="RESUMATOR_ID_IN" VALUE="<%=RESUMATOR_ID_VAL%>">
            <input class="span3" type="text" name="INSTITUTION_NAME" placeholder="Institution Name">
            <input class="span2" type="text" name="CITY_NAME" placeholder="City">
            <input class="span2" type="text" name="STATE_NAME" placeholder="State">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span3" type="text" name="DEGREE_NAME" placeholder="Degree Name">
            <input class="span2" type="text" name="DEGREE_MAJOR" placeholder="Major">
            <input class="span2" type="text" name="DEGREE_MINOR" placeholder="Minor">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span3" type="text" name="CERTIFICATION" placeholder="Certification">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span2" type="text" name="GRADE_POINTS" placeholder="Grade Point Average">
            <input class="span2" type="text" name="GRADUATION_DATE" placeholder="Graduation Date">
          </div>
          <div class="form-inline margin-form-inline">
           <input class="span2" type="text" NAME="DISPLAY_RANK_IN"placeholder="Display Rank">
          </div>
    </div>
    <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
          <button class="btn btn-primary" type="submit" >Save changes</button>
    </div>
      </form>
  </div>

<!-- EDIT REFERENCES MODAL -->

  <div id="edit-references-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
      <h3 id="myModalLabel">Edit References Information</h3>
    </div>
    <div class="modal-body">
      <form action="http://oracle.is.umbc.edu:8080/classpsp/IS420_TEAM_TRG.FORM_REFERENCES" method="get">
          <div class="form-inline margin-form-inline">
            <select name="REFERENCES_ID_IN">
            <script>for (var i = 0; i < references_array.length(); i++) {
              <option value="references_array[i].[0]"> document.write(references_array[0].[1] + " " +references_array[0].[2]); </option>
            }; </script>
          </SELECT>
            <input class="span3" type="hidden" NAME="RESUMATOR_ID_IN" VALUE="<%=RESUMATOR_ID_VAL%>">
            <input class="span3" type="text" NAME="F_NAME_IN" placeholder="First name" value="<%=%>">
            <input class="span2" type="text" NAME="L_NAME_IN" placeholder="Last Name" value="<%=%>">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span2" type="text" NAME="PHONE_NUMBER_IN" placeholder="Phone Number" value="<%=%>">
            
          </div>

          <textarea class="max-width" rows="3"NAME="ADDRESS_IN" placeholder="Address." value="<%=%>"></textarea>

          <div class="form-inline margin-form-inline">
            <input class="span2" type="text" NAME="EMAIL_IN" placeholder="Email Address" value="<%=%>">
            <input class="span2" type="text" NAME="COMPANY_IN" placeholder="Company name" value="<%=%>">
            <input class="span2" type="text" NAME="TITLE_IN" placeholder="Title" value="<%=%>">
            <input class="span2" type="text" NAME="DISPLAY_RANK_IN" placeholder="Display Rank" value="<%=%>">
          </div>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
      <button class="btn btn-primary" type="submit">Save changes</button>
      </form>
    </div>
    <div class="modal-footer">
    </div>
  </div>
