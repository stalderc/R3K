<!DOCTYPE html>
<%@page language="PL/SQL"%>
<%@plsql procedure="PAGE_EDUCATION_CURSOR"%>
<%@plsql parameter="RESUMATOR_ID_VAL" DEFAULT="NULL"%>

<%!CURSOR ED_CURSOR
  IS
    SELECT 
      EDUCATION.SCHOOL_ID,
      EDUCATION.DEGREE,
      EDUCATION.MAJOR,
      EDUCATION.MINOR,
      EDUCATION.CERTIFICATIONS,
      EDUCATION.GPA,
      EDUCATION.GRAD_DATE,
      EDUCATION.DISPLAY_RANK
    FROM EDUCATION
    WHERE EDUCATION.RESUMATOR_ID = RESUMATOR_ID_VAL
    ORDER BY DISPLAY_RANK;
  ED_ROW ED_CURSOR%ROWTYPE;
  EDUCATION_NO_INFO EXCEPTION;
  S_NAME SCHOOL.SCHOOL_NAME%TYPE;
  S_CITY SCHOOL.SCHOOL_CITY%TYPE;
  S_STATE SCHOOL.SCHOOL_STATE%TYPE; %>

  <%OPEN ED_CURSOR;
  LOOP
    FETCH ED_CURSOR INTO ED_ROW;
    SELECT SCHOOL_NAME INTO S_NAME FROM SCHOOL WHERE SCHOOL.SCHOOL_ID = ED_ROW.SCHOOL_ID;
    SELECT SCHOOL_CITY INTO S_CITY FROM SCHOOL WHERE SCHOOL.SCHOOL_ID = ED_ROW.SCHOOL_ID;
    SELECT SCHOOL_STATE INTO S_STATE FROM SCHOOL WHERE SCHOOL.SCHOOL_ID = ED_ROW.SCHOOL_ID;
    EXIT WHEN ED_CURSOR%NOTFOUND;%>

            <!-- loop through users education -->
            <div class="education-block">
                <!-- Full name of educational institution, city and state -->
                <p><%=S_NAME%>, <span class="pull-right"><%=S_CITY%>, <%=S_STATE%></span></p>
                <!-- Name of Degree Program -->
                <p><%=ED_ROW.DEGREE%>, <%=ED_ROW.MAJOR%><span class="pull-right"><%=ED_ROW.GRAD_DATE%></span></p>
                <p>GPA <%=ED_ROW.GPA%></p>
                <!-- list GPA if above 3.00 -->  
                <p><%=ED_ROW.MINOR%> MINOR</p>
                <p><%=ED_ROW.CERTIFICATIONS%> CERTIFICATIONS</p>
            </div>
            <!-- end education loop -->  
  <%
  END LOOP;
  CLOSE ED_CURSOR;%>

  <!-- ADD EDUCATION MODAL -->

  <div id="add-education-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
      <h3 id="myModalLabel">Add Education Information</h3>
    </div>
    <div class="modal-body">
      <form action="http://oracle.is.umbc.edu:8080/classpsp/IS420_TEAM_TRG.FORM_ADD_EDUCATION" method="get">
          <div class="form-inline margin-form-inline">
            <input class="span3" type="hidden" name="RESUMATOR_ID_IN" VALUE="<%=RESUMATOR_ID_VAL%>">
            <!-- school_id will need to be inserted here in future versions -->
            <input class="span3" type="text" name="DEGREE_NAME_IN" placeholder="Degree Name">
            <input class="span2" type="text" name="DEGREE_MAJOR_IN" placeholder="Major">
            <input class="span2" type="text" name="DEGREE_MINOR_IN" placeholder="Minor">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span3" type="text" name="CERTIFICATION_IN" placeholder="Certification">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span2" type="text" name="GRADE_POINTS_IN" placeholder="Grade Point Average">
            <input class="span2" type="text" id="datepicker1" name="GRADUATION_DATE_IN" placeholder="Graduation Date">
          </div>
          <div class="form-inline margin-form-inline">
           <!-- <input class="span2" type="text" name="DISPLAY_RANK_IN"placeholder="Display Rank"> -->
            <select class="span2" type="text" name="DISPLAY_RANK_IN">
              <option>Display Rank</option>
              <option value="1">1 - High</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5 - Low</option>
            </select>
          </div>
    </div>
    <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
          <button class="btn btn-primary" type="submit" >Save changes</button>
    </div>
      </form>
  </div>


<!-- EDIT EDUCATION MODAL -->

  <div id="edit-education-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
      <h3 id="myModalLabel">Edit Education Information</h3>
    </div>
    <div class="modal-body">
      <form action="http://oracle.is.umbc.edu:8080/classpsp/IS420_TEAM_TRG.FORM_EDUCATION" method="get">
          <div class="form-inline margin-form-inline">
            <input class="span3" type="hidden" id="RESUMATOR_ID_IN" name="RESUMATOR_ID_IN" VALUE="<%=RESUMATOR_ID_VAL%>">
            <!-- school_id will need to be inserted here in future versions -->
            <input class="span3" type="text" id="DEGREE_NAME_IN" name="DEGREE_NAME_IN" placeholder="Degree Name">
            <input class="span2" type="text" id="DEGREE_MAJOR_IN" name="DEGREE_MAJOR_IN" placeholder="Major">
            <input class="span2" type="text" id="DEGREE_MINOR_IN" name="DEGREE_MINOR_IN" placeholder="Minor">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span3" type="text" id="CERTIFICATION_IN" name="CERTIFICATION_IN" placeholder="Certification">
          </div>
          <div class="form-inline margin-form-inline">
            <input class="span2" type="text" id="GRADE_POINTS_IN" name="GRADE_POINTS_IN" placeholder="Grade Point Average">
            <input class="span2" type="text" id="GRADUATION_DATE_IN" name="GRADUATION_DATE_IN" placeholder="Graduation Date">
          </div>
          <div class="form-inline margin-form-inline">
           <input class="span2" type="text" id="DISPLAY_RANK_IN" name="DISPLAY_RANK_IN"placeholder="Display Rank">
          </div>
    </div>
    <div class="modal-footer">
          <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
          <button class="btn btn-primary" type="submit" >Save changes</button>
    </div>
      </form>
  </div>
